<!DOCTYPE html>
<html lang="es" translate="no">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Para que se vea bien en dispositivos moviles -->
    <link rel="shortcut icon" href="{% static 'img/taza-cafe.webp' %}" type="image/x-icon"> <!-- Icono de la p√°gina -->
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com"> <!-- Fuente de Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ovo&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/styleIndex.css' %}"> <!-- Enlace al archivo CSS -->
    <title>Cafeter√≠a</title>
</head>
<body>
    <header class="site-header"> 
        <aside class="sidebar">
            <h2>Men√∫</h2>
            <ul>
                <li><a href="#" id="caja-link">Caja</a></li>
                <li><a href="#" id="venta-link">Venta</a></li>
                <li><a href="{% url 'login' %}">Iniciar Sesi√≥n</a></li>
            </ul>
        </aside>
    </header>
    
    <!-- Contenido Principal -->
    <div class="content">    
        <!-- Secciones del men√∫ -->
        <section id="menu">
              <br><h1><i class="fa-solid fa-utensils"></i>&nbsp;<span class="menu-title">Men√∫</span></h1>
              <br><h2>Bebidas Calientes</h2>
            <div class="cards-container">
                <!-- Tarjeta 1 -->
                <div class="card">
                    <img src="{% static 'img/Idea de men√∫  MEN√ö  1_ Caf√© Cl√°sico _‚Ä¢_Espresso‚Ä¶.jfif' %}" alt="Latte Cl√°sico">
                    <h3>Latte Cl√°sico</h3>
                    <p>Caf√© espresso con leche vaporizada, cremoso y suave</p>
                    <p class="price">$70</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>

                <!-- Tarjeta 2 -->
                <div class="card">
                    <img src="{% static 'img/Dry Cappuccino.jfif' %}" alt="Capuchino Vainilla">
                    <h3>Capuchino Vainilla</h3>
                    <p>Con un toque dulce de vainilla y espuma cremosa</p>
                    <p class="price">$80</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>

                <!-- Tarjeta 3 -->
                <div class="card">
                    <img src="{% static 'img/Mexican Hot Chocolate_ Cozy, Spicy Winter Drink.jfif' %}" alt="Caf√© de Olla">
                    <h3>Caf√© de Olla</h3>
                    <p>Tradicional con canela y piloncillo</p>
                    <p class="price">$70</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>
              <div class="card">
                    <img src="{% static 'img/cortadito.jfif' %}" alt="Cortadito Cubano">
                    <h3>Cortadito Cubano</h3>
                    <p>Caf√© importado de cuba  mezclado  con un poco de leche, m√°s leche que un macchiato</p>
                    <p class="price">$70</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
              </div>
            </div>

            <br><h2>Bebidas Fr√≠as</h2>
            <div class="cards-container">
                <!-- Tarjeta 4 -->
                <div class="card">
                    <img src="{% static 'img/mocha.jfif' %}" alt="Frappe Mocha">
                    <h3>Frappe Mocha</h3>
                    <p>Ideal para los d√≠as calurosos, mezcla de caf√© y chocolate</p>
                    <p class="price">$78</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>
                <div class="card">
                    <img src="{% static 'img/iced strawberry matcha latte.jfif' %}" alt="Ice Matcha Fresa Latte">
                    <h3>Ice Matcha Fresa Latte</h3>
                    <p>Matcha con leche y fresas frescas y hielo</p>
                    <p class="price">$70</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
             </div>
                <!-- Tarjeta 5 -->
                <div class="card">
                    <img src="{% static 'img/Caramel Matcha Latte.jfif' %}" alt="Ice Matcha Latte">
                    <h3>Ice Matcha Latte</h3>
                    <p>T√© matcha con leche y hielo, saludable y delicioso</p>
                    <p class="price">$85</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>

                <!-- Tarjeta 6 -->
                <div class="card">
                    <img src="{% static 'img/caramel macchiato.jfif' %}" alt="Ice Caramel Macchiato">
                    <h3>Ice Caramel Macchiato</h3>
                    <p>Espresso con leche fr√≠a, hielo y caramelo</p>
                    <p class="price">$80</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <br><h2>Postres</h2>
            <div class="cards-container">
                <!-- Tarjeta 7 -->
                <div class="card">
                    <img src="{% static 'img/Pan de Pl√°tano con Nueces.jfif' %}" alt="Pan de Pl√°tano">
                    <h3>Pan de Pl√°tano</h3>
                    <p>Perfecto para acompa√±ar tu caf√©</p>
                    <p class="price">$60</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>
                <div class="card">
                    <img src="{% static 'img/Nutella Tiramisu.jfif' %}" alt="tiramisu">
                    <h3>Tiramisu</h3>
                    <p>Pan recien horenado ba√±ado con cafe cubano,cubierto con crema mascarpone,espolvoreado con cocoa </p>
                    <p class="price">$85</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>

                <!-- Tarjeta 8 -->
                <div class="card">
                    <img src="{% static 'img/cheesecake fresa.jfif' %}" alt="Cheesecake de Fresa">
                    <h3>Cheesecake de Fresa</h3>
                    <p>Cl√°sico, cremoso y con topping de fresa</p>
                    <p class="price">$80</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>

                <!-- Tarjeta 9 -->
                <div class="card">
                    <img src="{% static 'img/brownies.jfif' %}" alt="Brownie de Chocolate">
                    <h3>Brownie de Chocolate</h3>
                    <p>Esponjoso por dentro y crujiente por fuera</p>
                    <p class="price">$50</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>
            </div>
        </section>
       <!-- Modal para ver detalles del producto -->
        <div id="product-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <img id="modal-img" src="" alt="">
                <h3 id="modal-title"></h3>
                <p id="modal-desc"></p>
            </div>
        </div>
        <!-- Carrito de compras -->
        <div id="cart-toggle">üõí <span id="cart-count">0</span></div>
         <div id="cart">
         <div id="cart-header">
             <h3>Carrito</h3>
             <button id="clear-order" title="Vaciar carrito">Vaciar</button>
             <span id="cart-close">&times;</span>
         </div>
         <ul id="cart-items"></ul>
          <p>Total: $<span id="cart-total">0</span></p>
      </div>

        <section id="promociones">
            <h1><i class="fa-solid fa-tag"></i>&nbsp;Promociones</h1>
            <div class="promociones-container">
                <!-- Promoci√≥n 1 -->
                <div class="promo-card">
                    <img src="{% static 'img/+ cappuccino for two ü§é.jpg' %}" alt="Capuchinos 2x1">
                    <h3>2x1 en Capuchinos</h3>
                    <p>Todos los martes de 4pm a 6pm.</p>
                    <p class="price">$70</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>

                <!-- Promoci√≥n 2 -->
                <div class="promo-card">
                    <img src="{% static 'img/panque de platano y cafe.jpg' %}" alt="Combo Caf√© + Panqu√©">
                    <h3>Combo Caf√© + Panqu√©</h3>
                    <p>Solo $70. Disponible todo el d√≠a.</p>
                    <p class="price">$70</p>
                    <div class="card-buttons">
                        <button class="cart-btn">Agregar al carrito</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // ==========================
        // MODAL "VER PRODUCTO"
        // ==========================
        const modal = document.getElementById("product-modal");
        const modalImg = document.getElementById("modal-img");
        const modalTitle = document.getElementById("modal-title");
        const modalDesc = document.getElementById("modal-desc");
        const closeBtn = document.querySelector("#product-modal .close-btn");

        document.querySelectorAll(".view-btn").forEach(btn => {
            btn.addEventListener("click", e => {
                const card = e.target.closest(".card, .promo-card");
                if (!card) return;
                const img = card.querySelector("img");
                const title = card.querySelector("h3");
                const desc = card.querySelector("p");
                if (img) modalImg.src = img.src;
                if (title) modalTitle.textContent = title.textContent;
                if (desc) modalDesc.textContent = desc.textContent;
                if (modal) modal.style.display = "flex";
            });
        });

        if (closeBtn) {
            closeBtn.addEventListener("click", () => {
                if (modal) modal.style.display = "none";
            });
        }

        // ==========================
        // CARRITO
        // ==========================
        const cartItems = document.getElementById("cart-items");
        const cartTotal = document.getElementById("cart-total");
        const cartCount = document.getElementById("cart-count");
        const cartToggle = document.getElementById("cart-toggle");
        const cartClose = document.getElementById("cart-close");
        const cartEl = document.getElementById("cart");
        let cart = [];

        if (cartToggle && cartEl) cartToggle.addEventListener("click", () => cartEl.classList.toggle("open"));
        if (cartClose && cartEl) cartClose.addEventListener("click", () => cartEl.classList.remove("open"));

        document.querySelectorAll(".cart-btn").forEach(btn => {
            btn.addEventListener("click", e => {
                const card = e.target.closest(".card, .promo-card");
                if (!card) return;
                const nameEl = card.querySelector("h3");
                const priceEl = card.querySelector(".price");
                const name = nameEl ? nameEl.textContent : 'Producto';
                let price = 0;
                if (priceEl) {
                    const m = priceEl.textContent.match(/\$(\d+)/);
                    price = m ? parseInt(m[1], 10) : 0;
                }

                cart.push({name, price});
                updateCart();
                if (cartEl) cartEl.classList.add("open"); // se abre autom√°ticamente al agregar
            });
        });

        const clearOrderBtn = document.getElementById('clear-order');
        if (clearOrderBtn) {
            clearOrderBtn.addEventListener('click', () => {
                cart = [];
                updateCart();
                if (cartEl) cartEl.classList.remove('open');
            });
        }

        function updateCart() {
            if (!cartItems || !cartTotal) return;
            cartItems.innerHTML = "";
            let total = 0;
            cart.forEach((item, index) => {
                const li = document.createElement("li");
                const text = document.createElement('span');
                text.textContent = `${item.name} - $${item.price} `;
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Eliminar';
                removeBtn.className = 'remove-btn';
                removeBtn.addEventListener('click', () => {
                    cart.splice(index, 1);
                    updateCart();
                });
                li.appendChild(text);
                li.appendChild(removeBtn);
                cartItems.appendChild(li);
                total += item.price;
            });
            cartTotal.textContent = total;
            if (cartCount) cartCount.textContent = cart.length;
        }
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Fin Contenido Principal -->
</body>
</html>